% Perfect Numbers

clear,clc;
digits(1E8);
ntwos=1E8;
twos=zeros(1,ntwos+1);
perf=[6,28,496,8128,33550336,8589869056,137438691328,2305843008139952128];
% perf(9)=2658455991569831744654692615953842176;
% perf(10)=191561942608236107294793378084303638130997321548169216;
% perf(11)=13164036458569648337239753460458722910223472318386943117783728128;
% perf(12)=14474011154664524427946373126085988481573677491474835889066354349131199152128;
% perf(13)=23562723457267347065789548996709904988477547858392600710143027597506337283178622239730365539602600561360255566462503270175052892578043215543382498428777152427010394496918664028644534128033831439790236838624033171435922356643219703101720713163527487298747400647801939587165936401087419375649057918549492160555646976;
Nperf=length(perf);
thestart=zeros(1,Nperf);
theend=zeros(1,Nperf);
reduced=zeros(1,Nperf);
length=zeros(1,Nperf);
startdiff=zeros(1,Nperf-1);

for i=0:ntwos
    twos(i+1)=2^i;
end

for j=1:Nperf
    k=0;
    while perf(j) >= twos(k+1)
        k=k+1;
    end
    
    theend(j)=k-1;
    
    reduced(j)=perf(j);
    while reduced(j) > 0
        reduced(j)=reduced(j)-twos(k);
        k=k-1;
    end
    
    thestart(j)=k;
    
    length(j)=theend(j)-thestart(j);
    
end

results=[thestart',theend'];

for m=1:Nperf-1
    startdiff(m)=thestart(m+1)-thestart(m);
end

disp(startdiff');